<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>High 1 滑雪之旅 2026</title>
    <script src="https://unpkg.com/vue@3/dist/vue.global.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Noto+Sans+TC:wght@300;500;900&display=swap');
        [v-cloak] { display: none; }
        body { font-family: 'Noto Sans TC', sans-serif; background: #f0f9ff; color: #334155; margin: 0; padding-bottom: 100px; }
        .glass { background: rgba(255, 255, 255, 0.7); backdrop-filter: blur(10px); border: 1px solid rgba(255, 255, 255, 0.5); border-radius: 20px; box-shadow: 0 4px 15px rgba(0,0,0,0.05); }
        .nav-active { color: #2563eb; transform: scale(1.1); font-weight: 900; }
        .no-scrollbar::-webkit-scrollbar { display: none; }
    </style>
</head>
<body>

<div id="app" v-cloak>
    <header class="p-6 text-center bg-white/30 backdrop-blur-md sticky top-0 z-50">
        <h1 class="text-3xl font-black text-blue-600">High 1 滑雪 2026</h1>
        <p class="text-[10px] font-bold text-slate-400 mt-1 uppercase tracking-widest">Korea Ski Trip</p>
    </header>

    <main class="px-4 max-w-md mx-auto mt-4">
        <h2 class="text-xl font-black mb-4 flex items-center gap-2">
            <span class="w-1.5 h-6 bg-blue-500 rounded-full"></span> {{ currentTabName }}
        </h2>

        <div v-if="activeTab === 'itinerary'" class="space-y-4">
            <div class="flex gap-2 overflow-x-auto pb-2 no-scrollbar">
                <button v-for="d in days" :key="d" @click="selectedDay = d" 
                    :class="['px-5 py-2 rounded-full text-xs font-bold flex-shrink-0 transition-all shadow-sm', selectedDay === d ? 'bg-blue-600 text-white ring-4 ring-blue-100' : 'glass text-slate-400']">
                    {{ d }}
                </button>
            </div>

            <div v-if="itineraryData[selectedDay] && itineraryData[selectedDay].length > 0">
                <div v-for="(item, idx) in itineraryData[selectedDay]" :key="idx" class="flex gap-3 mb-4">
                    <div class="text-[11px] font-black text-blue-400 w-12 text-right pt-1 flex-shrink-0">{{ item.time }}</div>
                    <div class="flex-1 glass p-4 border-l-4 border-blue-400">
                        <div class="flex justify-between items-start gap-2">
                            <h4 class="text-sm font-black text-slate-700 leading-snug">{{ item.title }}</h4>
                            <a :href="'https://map.naver.com/v5/search/' + encodeURIComponent(item.title)" target="_blank" class="text-green-500 text-xs">
                                <i class="fas fa-location-dot"></i>
                            </a>
                        </div>
                        <p class="text-[11px] text-slate-400 mt-2 leading-relaxed whitespace-pre-line">{{ item.desc }}</p>
                    </div>
                </div>
            </div>
            <div v-else class="text-center py-20 text-slate-300 text-sm">此日尚無行程</div>
            
            <button @click="openModal('itinerary')" class="w-full py-4 border-2 border-dashed border-blue-200 rounded-2xl text-blue-300 font-bold text-xs">+ 手動加入行程</button>
        </div>

        <div v-if="activeTab === 'flight'" class="text-center py-20 glass">航班功能已修復，點擊「新增」開始</div>
        <div v-if="activeTab === 'wallet'" class="text-center py-20 glass text-slate-400">錢包功能正常運作中</div>
    </main>

    <div v-if="showModal" class="fixed inset-0 z-[300] flex items-center justify-center p-6">
        <div class="absolute inset-0 bg-slate-900/60 backdrop-blur-sm" @click="showModal = false"></div>
        <div class="bg-white w-full max-w-sm p-6 rounded-3xl relative z-10 shadow-2xl">
            <h3 class="text-lg font-black mb-4 text-slate-800">{{ modalTitle }}</h3>
            <div class="space-y-4">
                <input v-model="form.time" placeholder="時間 (如 17:30)" class="w-full p-4 bg-slate-50 rounded-xl border-none text-sm">
                <input v-model="form.title" placeholder="地點/活動標題" class="w-full p-4 bg-slate-50 rounded-xl border-none text-sm">
                <textarea v-model="form.desc" placeholder="詳細備註..." rows="3" class="w-full p-4 bg-slate-50 rounded-xl border-none text-sm"></textarea>
            </div>
            <div class="flex gap-3 mt-6">
                <button @click="showModal = false" class="flex-1 py-4 text-slate-400 font-bold">取消</button>
                <button @click="saveData" class="flex-1 py-4 bg-blue-600 text-white rounded-2xl font-black">儲存</button>
            </div>
        </div>
    </div>

    <nav class="fixed bottom-6 left-1/2 -translate-x-1/2 w-[90%] max-w-md glass p-2 flex justify-around items-center z-50 shadow-2xl border-white/80">
        <button @click="activeTab = 'flight'" :class="{'nav-active': activeTab === 'flight'}" class="flex-1 p-2 text-center text-slate-300 transition-all">
            <i class="fas fa-plane block text-lg"></i><span class="text-[8px] uppercase">Flight</span>
        </button>
        <button @click="activeTab = 'itinerary'" :class="{'nav-active': activeTab === 'itinerary'}" class="flex-1 p-2 text-center text-slate-300 transition-all">
            <i class="fas fa-calendar-day block text-lg"></i><span class="text-[8px] uppercase">Plan</span>
        </button>
        <button @click="activeTab = 'wallet'" :class="{'nav-active': activeTab === 'wallet'}" class="flex-1 p-2 text-center text-slate-300 transition-all">
            <i class="fas fa-wallet block text-lg"></i><span class="text-[8px] uppercase">Wallet</span>
        </button>
    </nav>
</div>

<script>
    const { createApp, ref, computed } = Vue;
    createApp({
        setup() {
            const activeTab = ref('itinerary');
            const selectedDay = ref('2/25');
            const showModal = ref(false);
            const modalTitle = ref('');
            const form = ref({ time: '', title: '', desc: '' });

            const days = ['2/25', '2/26', '2/27', '2/28', '3/1'];
            
            // 補完你的行程資料
            const defaultItinerary = {
                '2/25': [
                    { time: '17:30', title: '金浦機場 (GMP)', desc: '抵達韓國，辦理入境' },
                    { time: '19:30', title: 'Hotel Skypark Central Myeongdong 1', desc: '住宿：天空花園飯店明洞1號店' }
                ],
                '2/26': [
                    { time: '07:00', title: '明洞地鐵站 2 號出口', desc: '集合出發' },
                    { time: '10:00', title: '滑雪店', desc: '租借滑雪服 (約1小時)' },
                    { time: '11:00', title: '魷魚豬肉火鍋', desc: '韓式午餐 (約1小時)' },
                    { time: '12:30', title: 'HIGH ONE 滑雪場', desc: '租借用具、基本滑雪課程和自由練習 (約4.5小時)' },
                    { time: '17:00', title: '韓式五花肉燒烤', desc: '晚餐 (約1小時)' },
                    { time: '19:00', title: 'High 1 Resort 渡假村', desc: '入住，自由享用三溫暖、CASINO或夜間滑雪' }
                ],
                '2/27': [
                    { time: '08:00', title: '渡假村早餐', desc: '用餐時間約1小時' },
                    { time: '09:30', title: 'HIGH ONE 滑雪場', desc: '上午進階課程，下午自由練習 (午餐自理)' },
                    { time: '16:00', title: '集合返回首爾', desc: '退還器材，車程約3小時' },
                    { time: '19:00', title: '弘大地鐵站', desc: '下車吃晚餐' },
                    { time: '22:30', title: 'First Stay Hotel', desc: '飯店辦理入住' }
                ],
                '2/28': [
                    { time: '10:00', title: '望遠市場', desc: '吃傳統美食小吃' },
                    { time: '14:00', title: 'Yanghwa-ro 醫美', desc: '醫美行程' },
                    { time: '16:00', title: '漢江公園', desc: '散步、吃泡麵' },
                    { time: '19:00', title: '樂天購物 Lotte Mart', desc: '採買伴手禮' }
                ],
                '3/1': [
                    { time: '12:00', title: '前往機場', desc: '整理行李返家' }
                ]
            };

            const itineraryData = ref(JSON.parse(localStorage.getItem('trip_itinerary')) || defaultItinerary);

            const currentTabName = computed(() => {
                if(activeTab.value === 'flight') return '航班資訊';
                if(activeTab.value === 'itinerary') return '行程計畫';
                return '支出帳本';
            });

            const openModal = (type) => {
                modalTitle.value = '手動新增行程';
                form.value = { time: '', title: '', desc: '' };
                showModal.value = true;
            };

            const saveData = () => {
                if(!form.value.title) return alert('請填寫地點');
                itineraryData.value[selectedDay.value].push({...form.value});
                itineraryData.value[selectedDay.value].sort((a,b) => a.time.localeCompare(b.time));
                localStorage.setItem('trip_itinerary', JSON.stringify(itineraryData.value));
                showModal.value = false;
            };

            return { activeTab, selectedDay, days, itineraryData, currentTabName, showModal, modalTitle, form, openModal, saveData };
        }
    }).mount('#app');
</script>
</body>
</html>
