<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Korea Winter Trip 2026</title>
    <script src="https://unpkg.com/vue@3/dist/vue.global.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Noto+Sans+TC:wght@300;400;500;700&display=swap');
        
        body {
            font-family: 'Noto+Sans+TC', sans-serif;
            background: #0f172a;
            overflow-x: hidden;
            -webkit-tap-highlight-color: transparent;
        }

        .glass {
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(12px);
            -webkit-backdrop-filter: blur(12px);
            border: 1px solid rgba(255, 255, 255, 0.2);
        }

        .snow-particle {
            position: absolute;
            background: white;
            border-radius: 50%;
            pointer-events: none;
            animation: fall linear infinite;
        }

        @keyframes fall {
            to { transform: translateY(100vh) translateX(20px); }
        }

        .tab-active {
            color: #93c5fd;
            border-bottom: 2px solid #93c5fd;
        }

        /* éš±è—æ²è»¸ä½†ä¿ç•™åŠŸèƒ½ */
        .no-scrollbar::-webkit-scrollbar { display: none; }
        .no-scrollbar { -ms-overflow-style: none; scrollbar-width: none; }
    </style>
</head>
<body class="text-white">

<div id="app" class="max-w-md mx-auto min-h-screen relative shadow-2xl bg-gradient-to-b from-slate-900 to-blue-900 overflow-hidden">
    
    <!-- èƒŒæ™¯é›ªèŠ± -->
    <div v-for="n in 30" :key="n" class="snow-particle" :style="snowStyle()"></div>

    <!-- Header -->
    <header class="p-6 pt-10 relative z-10 text-center">
        <div class="inline-block px-3 py-1 glass rounded-full text-xs mb-2 text-blue-200">
            <i class="fas fa-snowflake animate-spin-slow mr-1"></i> 2026.02.25 - 03.01
        </div>
        <h1 class="text-3xl font-bold tracking-tight">KOREA TRIP</h1>
        <div class="flex justify-center items-center mt-2 gap-4 text-sm text-blue-100/70">
            <span><i class="fas fa-plane-departure mr-1"></i> TSA â†’ GMP</span>
            <span><i class="fas fa-plane-arrival mr-1"></i> ICN â†’ HUN</span>
        </div>
    </header>

    <!-- å¤©æ°£é å ±å°å¡ -->
    <div class="px-6 mb-6 relative z-10">
        <div class="glass rounded-2xl p-4 flex justify-between items-center">
            <div class="flex items-center gap-3">
                <i class="fas fa-cloud-meatball text-3xl text-blue-200"></i>
                <div>
                    <div class="text-lg font-bold">-2Â°C / -8Â°C</div>
                    <div class="text-xs text-white/60">é¦–çˆ¾ç‰¹åˆ¥å¸‚, ä¸‹é›ªæ©Ÿç‡ 40%</div>
                </div>
            </div>
            <div class="text-right">
                <div class="text-xs font-medium bg-blue-500/30 px-2 py-0.5 rounded text-blue-100">å¯’å†·è­¦å‘Š</div>
            </div>
        </div>
    </div>

    <!-- Tabs -->
    <nav class="flex px-6 border-b border-white/10 relative z-10 text-sm mb-4">
        <button v-for="tab in tabs" @click="currentTab = tab.id" 
                :class="['flex-1 py-3 transition-all', currentTab === tab.id ? 'tab-active font-bold' : 'text-white/40']">
            {{ tab.name }}
        </button>
    </nav>

    <!-- Main Content -->
    <main class="px-6 pb-24 relative z-10 overflow-y-auto no-scrollbar" style="max-height: calc(100vh - 280px);">
        
        <!-- Tab 1: ç­æ©Ÿ & è¡Œç¨‹ -->
        <div v-if="currentTab === 'schedule'" class="space-y-6">
            <!-- ç­æ©Ÿè³‡è¨Š -->
            <section>
                <h2 class="text-xs font-bold text-blue-300 uppercase tracking-widest mb-3">Flight Info</h2>
                <div class="space-y-3">
                    <div v-for="f in flights" class="glass rounded-xl p-4 border-l-4 border-blue-400">
                        <div class="flex justify-between items-start mb-2">
                            <span class="text-xs font-bold text-white/50">{{ f.date }} {{ f.type }}</span>
                            <i class="fas fa-plane text-blue-400"></i>
                        </div>
                        <div class="flex justify-between items-center text-sm">
                            <div class="text-center flex-1">
                                <div class="font-bold text-lg leading-tight">{{ f.fromCode }}</div>
                                <div class="text-[10px] text-white/60">{{ f.from }}</div>
                                <div class="text-blue-200 font-mono">{{ f.timeDep }}</div>
                            </div>
                            <div class="flex-1 flex flex-col items-center px-2">
                                <div class="w-full border-t border-dashed border-white/20 relative">
                                    <i class="fas fa-chevron-right absolute -right-1 -top-1.5 text-[8px] text-white/30"></i>
                                </div>
                            </div>
                            <div class="text-center flex-1">
                                <div class="font-bold text-lg leading-tight">{{ f.toCode }}</div>
                                <div class="text-[10px] text-white/60">{{ f.to }}</div>
                                <div class="text-blue-200 font-mono">{{ f.timeArr }}</div>
                            </div>
                        </div>
                    </div>
                </div>
            </section>

            <!-- æ¯æ—¥è¡Œç¨‹ -->
            <section v-for="(day, date) in groupedSchedule" :key="date">
                <h2 class="text-xs font-bold text-blue-300 uppercase tracking-widest mb-3">{{ date }}</h2>
                <div class="space-y-4">
                    <div v-for="item in day" class="relative pl-6 before:content-[''] before:absolute before:left-0 before:top-2 before:w-2 before:h-2 before:bg-blue-400 before:rounded-full before:shadow-[0_0_10px_#60a5fa]">
                        <div class="glass p-3 rounded-xl">
                            <div class="flex justify-between">
                                <span class="text-xs font-mono text-blue-300 mb-1 block">{{ item.time }}</span>
                                <button @click="navTo(item.location)" v-if="item.location" class="text-[10px] bg-green-500/20 text-green-400 px-2 rounded-full border border-green-500/30">
                                    <i class="fas fa-location-arrow"></i> Naver
                                </button>
                            </div>
                            <h3 class="font-bold text-sm">{{ item.title }}</h3>
                            <p v-if="item.desc" class="text-xs text-white/50 mt-1">{{ item.desc }}</p>
                        </div>
                    </div>
                </div>
            </section>
        </div>

        <!-- Tab 2: è¨˜å¸³ -->
        <div v-if="currentTab === 'money'" class="space-y-4">
            <div class="glass p-4 rounded-2xl mb-4">
                <h3 class="text-sm font-bold mb-3">æ–°å¢æ”¯å‡º</h3>
                <div class="space-y-3">
                    <input v-model="bill.desc" type="text" placeholder="é …ç›®" class="w-full bg-white/5 border border-white/10 rounded-lg p-2 text-sm">
                    <div class="flex gap-2">
                        <input v-model.number="bill.amount" type="number" placeholder="é‡‘é¡ (KRW)" class="flex-1 bg-white/5 border border-white/10 rounded-lg p-2 text-sm">
                        <select v-model="bill.payer" class="bg-white/10 border border-white/10 rounded-lg p-2 text-sm text-black">
                            <option v-for="m in members" :value="m">{{ m }}</option>
                        </select>
                    </div>
                    <button @click="addBill" class="w-full bg-blue-500 py-2 rounded-lg font-bold text-sm">ç¢ºèªåŠ å…¥</button>
                </div>
            </div>

            <div class="space-y-2">
                <div v-for="b in bills" class="flex justify-between items-center glass p-3 rounded-xl text-sm">
                    <div>
                        <span class="font-bold text-blue-300">{{ b.payer }}</span> 
                        <span class="text-white/60 ml-2">{{ b.desc }}</span>
                    </div>
                    <div class="font-mono">â‚© {{ b.amount }}</div>
                </div>
            </div>

            <!-- åˆ†å¸³çµæœ -->
            <div v-if="bills.length > 0" class="mt-6 p-4 border-t border-white/10">
                <h3 class="text-sm font-bold text-blue-300 mb-3 uppercase tracking-tighter">ğŸ’¡ åˆ†å¸³å»ºè­°</h3>
                <div v-for="s in splitLogic" class="text-sm bg-blue-400/10 p-2 rounded mb-1">
                    {{ s.from }} âœ {{ s.to }} : <span class="font-mono font-bold">â‚© {{ s.amount }}</span>
                </div>
            </div>
        </div>

        <!-- Tab 3: å‚™å¿˜éŒ„ -->
        <div v-if="currentTab === 'notes'" class="space-y-4">
            <div class="glass p-4 rounded-2xl">
                <textarea v-model="newNote" rows="3" placeholder="å¯«ä¸‹ä»Šå¤©çš„æ»‘é›ªå¿ƒæƒ…æˆ–å¾…è¾¦äº‹é …..." class="w-full bg-white/5 border border-white/10 rounded-lg p-3 text-sm mb-2"></textarea>
                <button @click="addNote" class="w-full bg-indigo-500 py-2 rounded-lg font-bold text-sm">å„²å­˜ç´€éŒ„</button>
            </div>
            <div v-for="note in notes" class="glass p-4 rounded-xl relative">
                <div class="text-[10px] text-white/30 mb-1">{{ note.date }}</div>
                <p class="text-sm">{{ note.text }}</p>
                <button @click="removeNote(note.id)" class="absolute top-3 right-3 text-white/20"><i class="fas fa-times"></i></button>
            </div>
        </div>

    </main>

    <!-- Footer Quote -->
    <div class="absolute bottom-0 left-0 right-0 p-4 text-center text-[10px] text-white/20 pointer-events-none">
        è¨˜å¾—æ¶ˆæ»…å†°ç®±è£¡çš„25é¡†è›‹å†å‡ºç™¼å–”ï¼ğŸ§Š
    </div>
</div>

<script>
    const { createApp, ref, computed } = Vue;

    createApp({
        setup() {
            const currentTab = ref('schedule');
            const tabs = [
                { id: 'schedule', name: 'è¡Œç¨‹è¡¨' },
                { id: 'money', name: 'è¨˜å¸³' },
                { id: 'notes', name: 'ç­†è¨˜' }
            ];

            const flights = [
                { date: '02/25', type: 'å»ç¨‹', from: 'æ¾å±±æ©Ÿå ´ T1', fromCode: 'TSA', to: 'é‡‘æµ¦æ©Ÿå ´', toCode: 'GMP', timeDep: '14:05', timeArr: '17:30' },
                { date: '03/01', type: 'å›ç¨‹', from: 'ä»å·æ©Ÿå ´ T1', fromCode: 'ICN', to: 'èŠ±è“®æ©Ÿå ´', toCode: 'HUN', timeDep: '11:50', timeArr: '13:30' }
            ];

            const fullSchedule = [
                { date: '02/25', time: '17:30', title: 'æŠµé”é‡‘æµ¦æ©Ÿå ´', location: 'Gimpo International Airport', desc: 'å…¥å¢ƒæª¢æŸ¥ã€é ˜å–è¡Œæ' },
                { date: '02/25', time: '19:00', title: 'å…¥ä½æ˜æ´å¤©ç©ºèŠ±åœ’é£¯åº—1è™Ÿåº—', location: 'Hotel Skypark Myeongdong 1', desc: 'è¾¦ç†å…¥ä½ã€æ˜æ´æ™šé¤' },
                { date: '02/26', time: '07:00', title: 'æ˜æ´åœ°éµç«™é›†åˆ', location: 'Myeong-dong Station Exit 2', desc: '2è™Ÿå‡ºå£é›†åˆå‡ºç™¼æ»‘é›ªè¡Œç¨‹' },
                { date: '02/26', time: '10:00', title: 'æ»‘é›ªåº—ç§Ÿå€Ÿæ»‘é›ªæœ', location: 'High One Resort Ski Rental', desc: 'æŒ‘é¸é›ªè¡£ã€è£å‚™' },
                { date: '02/26', time: '11:00', title: 'åˆé¤ï¼šé­·é­šè±¬è‚‰ç«é‹', location: 'High One Restaurant', desc: 'ç†±é¨°é¨°çš„ç«é‹è£œå……èƒ½é‡' },
                { date: '02/26', time: '12:30', title: 'HIGH ONE æ»‘é›ªç·´ç¿’', location: 'High One Resort', desc: 'å°ˆæ¥­æ•™ç·´æˆèª² + è‡ªç”±ç·´ç¿’ (4.5å°æ™‚)' },
                { date: '02/26', time: '17:00', title: 'æ™šé¤ï¼šéŸ“å¼äº”èŠ±è‚‰ç‡’çƒ¤', location: 'Grilled Pork Belly', desc: 'é‹å‹•å¾Œçš„ç¾å‘³å¤§é¤' },
                { date: '02/26', time: '19:00', title: 'å…¥ä½æ¸¡å‡æ‘ / Casino', location: 'High One Resort', desc: 'ä¸‰æº«æš–ã€å¤œé–“æ»‘é›ªæˆ–åƒè§€è³­å ´' },
                { date: '02/27', time: '08:00', title: 'æ¸¡å‡æ‘æ—©é¤', location: 'Resort Breakfast', desc: 'é–‹å•Ÿæ»‘é›ªç¬¬äºŒå¤©' },
                { date: '02/27', time: '09:30', title: 'é€²éšæ»‘é›ªèª²ç¨‹', location: 'High One Resort', desc: 'æ•™ç·´æŒ‡å°é€²éšæŠ€å·§ï¼Œä¸‹åˆè‡ªç”±ç·´ç¿’' },
                { date: '02/27', time: '16:00', title: 'æ­¸é‚„å™¨æ & å›é¦–çˆ¾', location: 'Seoul', desc: 'è»Šç¨‹ç´„3å°æ™‚' },
                { date: '02/27', time: '19:00', title: 'å¼˜å¤§è¡—é ­æ™šé¤', location: 'Hongdae', desc: 'å¼˜å¤§åœ°éµç«™ä¸‹è»Šåƒæ™šé¤' },
                { date: '02/27', time: '22:30', title: 'å…¥ä½ First Stay é£¯åº—', location: 'First Stay Hotel', desc: 'å›æˆ¿ä¼‘æ¯' },
                { date: '02/28', time: '10:00', title: 'æœ›é å¸‚å ´ç¾é£Ÿ', location: 'Mangwon Market', desc: 'é«”é©—é“åœ°å¸‚å ´å°åƒ' },
                { date: '02/28', time: '14:00', title: 'Yanghwa-ro é†«ç¾é«”é©—', location: 'Yanghwa-ro Clinic', desc: 'ä¸‹åˆè¡Œç¨‹' },
                { date: '02/28', time: '17:00', title: 'æ¼¢æ±Ÿå…¬åœ’ & æ¨‚å¤©è³¼ç‰©', location: 'Han River Park', desc: 'æœ€å¾Œæ¡è²·æ™‚é–“' }
            ];

            const groupedSchedule = computed(() => {
                const groups = {};
                fullSchedule.forEach(item => {
                    if (!groups[item.date]) groups[item.date] = [];
                    groups[item.date].push(item);
                });
                return groups;
            });

            // è¨˜å¸³ logic
            const members = ref(['æˆ‘', 'å¤¥ä¼´A', 'å¤¥ä¼´B']);
            const bills = ref([]);
            const bill = ref({ desc: '', amount: null, payer: 'æˆ‘' });

            const addBill = () => {
                if (!bill.value.amount) return;
                bills.value.push({ ...bill.value, id: Date.now() });
                bill.value = { desc: '', amount: null, payer: 'æˆ‘' };
            };

            const splitLogic = computed(() => {
                const totalBalance = {};
                members.value.forEach(m => totalBalance[m] = 0);
                
                bills.value.forEach(b => {
                    const share = b.amount / members.value.length;
                    members.value.forEach(m => {
                        if (m === b.payer) totalBalance[m] += (b.amount - share);
                        else totalBalance[m] -= share;
                    });
                });

                const debt = [];
                const credit = [];
                Object.keys(totalBalance).forEach(m => {
                    if (totalBalance[m] < -1) debt.push({ name: m, amt: -totalBalance[m] });
                    if (totalBalance[m] > 1) credit.push({ name: m, amt: totalBalance[m] });
                });

                const trans = [];
                let i = 0, j = 0;
                while (i < debt.length && j < credit.length) {
                    const pay = Math.min(debt[i].amt, credit[j].amt);
                    trans.push({ from: debt[i].name, to: credit[j].name, amount: Math.round(pay) });
                    debt[i].amt -= pay;
                    credit[j].amt -= pay;
                    if (debt[i].amt <= 1) i++;
                    if (credit[j].amt <= 1) j++;
                }
                return trans;
            });

            // ç­†è¨˜ logic
            const notes = ref(JSON.parse(localStorage.getItem('korea_notes') || '[]'));
            const newNote = ref('');
            const addNote = () => {
                if (!newNote.value) return;
                notes.value.unshift({ id: Date.now(), text: newNote.value, date: new Date().toLocaleString() });
                newNote.value = '';
                localStorage.setItem('korea_notes', JSON.stringify(notes.value));
            };
            const removeNote = (id) => {
                notes.value = notes.value.filter(n => n.id !== id);
                localStorage.setItem('korea_notes', JSON.stringify(notes.value));
            };

            const navTo = (loc) => {
                window.open(`https://map.naver.com/v5/search/${encodeURIComponent(loc)}`, '_blank');
            };

            const snowStyle = () => {
                const size = Math.random() * 5 + 2 + 'px';
                return {
                    left: Math.random() * 100 + 'vw',
                    width: size,
                    height: size,
                    opacity: Math.random(),
                    animationDuration: Math.random() * 3 + 4 + 's',
                    animationDelay: Math.random() * 5 + 's'
                }
            };

            return {
                currentTab, tabs, flights, groupedSchedule, navTo, snowStyle,
                bill, bills, members, addBill, splitLogic,
                notes, newNote, addNote, removeNote
            }
        }
    }).mount('#app');
</script>
</body>
</html>